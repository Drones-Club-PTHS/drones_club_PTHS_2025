# Блок 2. Базовые полётные команды. (Заметки)

## Включение квадрокоптера
* Вставляем аккумулятор в корпус
* Подключаем провод аккумулятора (на разъёме ключ снизу)
* Нажимаем кнопку включения (на корпусе сбоку)

После включения дрон начинает раздавать Wi-Fi сеть.

## Подключение к квадрокоптеру по Wi-Fi

Имя сети: `PioneerMini********`\
Пароль: `12345678`

[Документация. Подключение к Wi-Fi.](https://docs.geoscan.ru/pioneer/programming/python/python-sdk-main.html#pioneer)

## Подключение к квадрокоптеру в коде

```python
from pioneer_sdk import Pioneer
mini = Pioneer()
```

Как только мы создаём новый экземпляр класса `Pioneer` компьютер пытается подключиться к квадрокоптеру и начинает обмениваться с ним сообщениями. Даже если в нашей программе ничего не происходит, компьютер всё равно постоянно обменивается с дроном сообщениями, чтобы не потерять соединение. Связь с дроном прекращается либо если мы закрыли её принудительно, либо когда программа завершилась.

Про дополнительные параметры при создании экземпляра класса `Pioneer` можно почитать в документации.

[Документация. `Pioneer()`](https://docs.geoscan.ru/pioneer/programming/python/pioneer-sdk-methods.html#id2)

## Экстренная посадка при ошибке

При написании программ нельзя обойтись без ошибок и опечаток. Если вы подняли квадрокоптер в воздух, а потом ваша программа упала с ошибкой, то дрон так и останется висеть в воздухе (или продолжит лететь в неизвестном направлении). Чтобы этого избежать **настоятельно рекомендуем**(!!!) использовать обработчик ошибок `try-catch-finally`. Если весь полётный код поместить в блок `try`, а в блоке `catch` написать команду `land()`, то при возникновении ошибки дрон будет приземляться. Но полётные программы скорее всего в любом случае должны закончиться приземлением, даже если ошибок не возникло. Поэтому вместо блока `catch` можно использовать блок `finally`. Код из блока `finally` будет выполняться каждый раз после блока `try`, не зависимо от того, возникла ли ошибка в блоке `try`.

Пример использования обработчика ошибок:
```python
from pioneer_sdk import Pioneer

drone = Pioneer()
try:
    drone.arm()
    drone.takeoff()
    # Другие полётные команды
finally:
    drone.land()
```

Если в коде программы ошибки как таковой нет, но вы хотите остановить выполнение программы, то можно вызвать ошибку `KeyboardInterrupt`, нажатием клавиш `Ctrl + C`. (В большинстве терминалов именно это сочетание клавиш отправляет процессу сигнал прерывания).

## Полётные команды

* Все полётные методы вызываются у созданного экземпляра класса `Pioneer`.
* Методы `ARM`, `DISARM`, `TAKEOFF`, `LAND` блокирующие. Это значит, что вызванная функция не завершиться пока от дрона не прейдёт ответ, что он выполнил нужные действия (или отклонил выполнение команды). 

### `ARM`, `DISARM`

```python
mini.arm()     # Запустить моторы
mini.disarm()  # Остановить моторы
```

[Документация. `ARM`](https://docs.geoscan.ru/pioneer/programming/python/pioneer-sdk-methods.html#arm)\
[Документация. `DISARM`](https://docs.geoscan.ru/pioneer/programming/python/pioneer-sdk-methods.html#disarm)

### `TAKEOFF`, `LAND`

```python
mini.takeoff()  # Взлететь
mini.land()     # Приземлиться
```

По команде `takeoff()` дрон взлетает в воздух. Высоту взлёта в программе указать невозможно, эта высота указывается в параметрах автопилота. Если нужно, чтобы дрон взлетел на определённую высоту, то можно после `takeoff()` отправлять команду `go_to_local_point()` (см. [Блок_03](./Блок_03)).

По команде `land()` дрон начинает посадку. После посадки дрон останавливает моторы (дополнительно отправлять команду `disarm()` не нужно).

[Документация. `TAKEOFF`](https://docs.geoscan.ru/pioneer/programming/python/pioneer-sdk-methods.html#takeoff)\
[Документация. `LAND`](https://docs.geoscan.ru/pioneer/programming/python/pioneer-sdk-methods.html#land)


## Задержка в коде.
### Таймер
Для задержки можно воспользоваться методом `sleep()`и з библиотеки `time`. Библиотека `time` встроена в Python, отдельно её устанавливать не надо. 

```python
import time
time.sleep(5)  # Задержка 5 сек
```

[Документация. `time.sleep()`](https://docs.python.org/3/library/time.html#time.sleep)

### input
Если хочется, чтобы код продолжился после того как вы нажали какую-нибудь клавишу, то можно воспользоваться методом `input()`. Он останавливает выполнение программы и ожидает пользовательского ввода.

